<h1><%= @recipe.title %></h1>

<p><strong>Preparation Time:</strong> <%= @recipe.preparation_time %> hours</p>

<p>
  <strong>Public:</strong>
  <div class="form-check form-switch">
    <label class="form-check-label" for="flexSwitchCheckChecked">Toggle Public:</label>
    <input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked" <%= @recipe.public ? 'checked' : '' %>>
  </div>
</p>

<p><strong>Cooking Time:</strong> <%= @recipe.cooking_time %> hours</p>
<p><strong>Description:</strong> <%= @recipe.description %></p>

<script>
  $(document).ready(function() {
    $('#flexSwitchCheckChecked').change(function() {
      var publicStatus = $(this).is(':checked');
      var csrfToken = $('meta[name="csrf-token"]').attr('content');
      
      $.ajax({
        type: 'PATCH',
        url: '<%= recipe_path(@recipe) %>',
        data: { recipe: { public: publicStatus } },
        headers: { 'X-CSRF-Token': csrfToken },
        success: function(data) {
          console.log('Recipe public status updated successfully');
        },
        error: function(xhr, status, error) {
          console.error('Error updating recipe public status:', error);
        }
      });
    });
  });
</script>
